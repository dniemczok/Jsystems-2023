pipeline {
    agent any
    parameters {
        choice (name: 'Environment', choices:['dev','stage','prod'], description: 'Environment name for deployment')
    }
    stages {
        stage('Dev') {
            steps {
                sh 'echo "Building the application DEV"'
                // Add commands to build application
                when {
                    environment name: 'Environment', value: 'dev'
                }
                steps { 
                    echo "Deploying dev"
                }
            }
        }

        stage('PRO') {
            when {
                anyOf {
                    expression { params.environment == 'prod' }
                }
                // Opcjonalnie 
                // when { expression { params.environment == 'demo'  }
            }
            steps {
                echo "Deployment on PROD"
            } 
        }
    }
}
